<html>
<head>
    <title>hAPPi - Human - Application Interpreter</title>
    <script type="text/javascript" src="http://localhost:5555/lib/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="http://localhost:5555/lib/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://localhost:5555/lib/angular.min.js"></script>
    <script type="text/javascript" src="http://localhost:5555/lib/qrcode.min.js"></script>
    <script type="text/javascript" src="http://localhost:5555/js/strings.js"></script>
    <script type="text/javascript" src="http://localhost:5555/js/util.js"></script>
    <script type="text/javascript" src="http://localhost:5555/js/index.js"></script>
    <script type="text/javascript" src="http://localhost:5555/js/app.js"></script>
    <script type="text/javascript" src="http://localhost:5555/js/signup.js"></script>
    <script type="text/javascript" src="http://localhost:5555/services/appService.js"></script>
    <script type="text/javascript" src="http://localhost:5555/services/objectService.js"></script>
    <script type="text/javascript" src="http://localhost:5555/services/behaviorService.js"></script>
    <script type="text/javascript" src="http://localhost:5555/services/designService.js"></script>
    <script type="text/javascript" src="http://localhost:5555/services/releaseService.js"></script>
    <link rel="stylesheet" type="text/css" href="http://localhost:5555/css/index.css">
    <link rel="stylesheet" type="text/css" href="http://localhost:5555/lib/bootstrap.min.css">
</head>
<body data-ng-init="initHomePage()" data-ng-app="main" data-ng-controller="ctrl_main">
<nav class="navbar navbar-inverse" >
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="#" data-ng-click="gotoMainPage()">hAPPi</a>
        </div>
        <ul class="nav navbar-nav navbar-left">
            <li><a href="#" data-ng-click="backToMain()">+ Create App</a></li>
            <li><a href="#" data-ng-click="showAppsList()">My Apps</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
            <li><a href="http://localhost:9998/hAPPi/Signup">Sign Up</a></li>
            <li><a href="#">Login</a></li>
        </ul>
    </div>
</nav>
<div data-ng-show="areaFlags['mainPage']">
    <h2 style="text-align: center;">Welcome to hAPPi!</h2>
</div>
<div ng-show="areaFlags['frontPage']">
    <h3 style="text-align: center;">Create a New Application</h3><hr style="width: 30%">
    <div class="object-name-input-width col-xs-2 clearFloats appDiv">
        <input data-ng-model="applicationName" type="text" class="form-control newAppName" placeholder="My App Name">
    </div><br>

    <div class="platformChooseArea">
        <h3>Develop For</h3><hr>
        <div ng-switch="switchIosImg==1">
            <div class="imgDivWidth imgMarginLeft" ng-switch-when=true>
                <img data-ng-click="toggleIos()" class="phoneImg" src="http://localhost:5555/img/{{iosImg}}">
            </div>
            <div class="imgDivWidth imgMarginLeft" ng-switch-when=false>
                <img data-ng-click="toggleIos()" class="phoneImgEnabled" src="http://localhost:5555/img/{{iosImgEnable}}">
            </div>
        </div>

        <div ng-switch="switchAndroidImg==1">
            <div class="imgDivWidth" ng-switch-when=true>
                <img data-ng-click="toggleAndroid()" class="phoneImg" src="http://localhost:5555/img/{{androidImg}}">
            </div>
            <div class="imgDivWidth" ng-switch-when=false>
                <img data-ng-click="toggleAndroid()" class="phoneImgEnabled" src="http://localhost:5555/img/{{androidImgEnable}}">
            </div>
        </div>

        <div class="clearFloats" ng-switch="switchWindowsImg==1">
            <div class="imgDivWidth" ng-switch-when=true>
                <img data-ng-click="toggleWindows()" class="phoneImg" src="http://localhost:5555/img/{{windowsImg}}">
            </div>
            <div class="imgDivWidth" ng-switch-when=false>
                <img data-ng-click="toggleWindows()" class="phoneImgEnabled" src="http://localhost:5555/img/{{windowsImgEnable}}">
            </div>
        </div>
    </div>
    <span class="btn btn-primary btn-block" data-ng-click="addApplication()">Start</span>
    <hr>
</div>
<div data-ng-show="areaFlags['myApps']">
    <div>
        <h3  style="text-align: center;">My Apps</h3>
        <div  style="text-align: center;" class="applicationsList" data-ng-init="indexToShow = -1">
            <div href="#" class="list-group-item" data-ng-repeat="application in applications track by $index">
                <!--<div class="list-group-item">-->
                    <div>
                        <table style="width: 100%">
                            <tr>
                                <td style="width: 80%; padding-left: 1%;">
                                    <span class="applicationTitle">{{application.name}}</span>
                                </td>
                                <td style="width: 10%; padding-left: 1%;">
                                    <input type="button" value="Edit" class="btn btn-warning btn-app-list" data-ng-click="showApplicationEditArea($event, application)" data-ng-show="!(indexToShow == application.id)">
                                </td>
                                <td style="width: 10%; padding-left: 1%;">
                                    <input type="button" value="Start >" class="btn btn-primary btn-app-list" data-ng-click="getApplication(application);menuAddObjects()" data-ng-show="!(indexToShow == application.id)">
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="applicationEditArea" data-ng-show="indexToShow == application.id">
                        <hr>
                        <table>
                            <tr>
                                <td>Name:</td>
                                <td colspan="3"><input type="text" data-ng-model="getCurrentApplication().name" style="width:100%;"></td>
                            </tr>
                            <tr>
                                <td>Platforms:</td>
                                <td>
                                    <div class="checkbox" ng-switch="switchAndroidImg==1">
                                        <div ng-switch-when=true>
                                            <img data-ng-click="toggleAndroid()" class="checkboxIcon" src="http://localhost:5555/img/{{androidCheckboxImg}}">
                                        </div>
                                        <div ng-switch-when=false>
                                            <img data-ng-click="toggleAndroid()" class="checkboxIcon" src="http://localhost:5555/img/{{androidCheckboxImgEnable}}">
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="checkbox" ng-switch="switchIosImg==1">
                                        <div ng-switch-when=true>
                                            <img data-ng-click="toggleIos()" class="checkboxIcon" src="http://localhost:5555/img/{{iosCheckboxImg}}">
                                        </div>
                                        <div ng-switch-when=false>
                                            <img data-ng-click="toggleIos()" class="checkboxIcon" src="http://localhost:5555/img/{{iosCheckboxImgEnable}}">
                                        </div>
                                    </div>
                                </td>

                                <td>
                                    <div class="checkbox" ng-switch="switchWindowsImg==1">
                                        <div ng-switch-when=true>
                                            <img data-ng-click="toggleWindows()" class="checkboxIcon" src="http://localhost:5555/img/{{windowsCheckboxImg}}">
                                        </div>
                                        <div ng-switch-when=false>
                                            <img data-ng-click="toggleWindows()" class="checkboxIcon" src="http://localhost:5555/img/{{windowsCheckboxImgEnable}}">
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </table>
                        <hr>
                        <button type="button" class="btn btn-danger" data-ng-click="hideApplicationEditArea()">Cancel</button>
                        <button type="button" class="btn btn-primary" data-ng-click="editApplication(application)">Save</button>
                        <button type="button" class="btn btn-warning" style="margin-left: 30%" data-ng-click="deleteApplication(application)">Delete</button>
                    </div>
                <!--</div>-->
            </div>
        </div>
    </div>
</div>
<div class="workArea" ng-hide="areaFlags['frontPage']">
    <ul class="nav nav-tabs" data-ng-show="areaFlags['menuArea']">
        <li class="active"><a data-toggle="tab" href="#objectsAddArea"><p class="menuTab">Objects</p></a></li>
        <li><a data-toggle="tab" href="#behaviorAddArea"><p class="menuTab">Behavior</p></a></li>
        <li><a data-toggle="tab" href="#releaseArea"><p class="menuTab">Release</p></a></li>
    </ul>
    <div class="workAreaComponent centralArea tab-content" data-ng-show="areaFlags['centralArea']">
        <div id="objectsAddArea" class="centralAreaComponent tab-pane fade in active">
            <div class="componentMainTitle">
                Objects
            </div>
            <span class="btn btn-primary btn-block" data-ng-click="addNewObject()">new object</span>
            <div data-ng-show="showNoObjectMembersImage && !getCurrentApplication().objects.length"><img class="noMembersImage" src="http://localhost:5555/img/no_objects.png"></div>
            <div class="mergeLeft" data-ng-show="areaFlags['objectCreateArea']">
                <form>
                    <div class="form-group">
                        <label>Name:</label>
                        <input data-ng-model="getCurrentObject().name" class="form-control" placeholder="Enter Object Name">
                    </div>
                    <div class="form-group">
                        <label>Attributes:</label>
                        <br>
                        <div data-ng-repeat="attribute in getCurrentObject().attributes track by $index">
                            {{$index + 1}}.
                            Name:
                            <input type="text" placeholder="Enter Attribute Name" data-ng-model="attribute.name">
                            Type:
                            <select data-ng-model="attribute.type" ng-options="i for i in basic_types"></select>
                            <div class="removeFormFieldsButton" data-ng-click="removeAttribute($index)"></div>
                            <br>
                        </div>
                    </div>
                    <div class="addFormFieldsButton" data-ng-click="addAttribute()"></div>
                    <hr/>
                    <div class="form-group">
                        <label>Actions:</label>
                        <br>
                        <div data-ng-repeat="action in getCurrentObject().actions track by $index">
                            <form class="editArea">
                                {{$index + 1}}.
                                Name: <input type="text" data-ng-model="action.name">
                                <br>
                                Attribute:
                                <select ng-model="action.operand1" ng-options="i.name for i in getCurrentObject().attributes"></select>
                                <br>
                                Action:
                                <select ng-model="action.operator" ng-options="i for i in operators"></select>
                                <br>
                                Operand:
                                <input type="text" ng-model="action.operand2">
                                <div class="removeFormFieldsButton" data-ng-click="removeAction($index)"></div>
                                <br><br>
                            </form>
                        </div>
                        <div class="addFormFieldsButton" data-ng-click="addAction()"></div>
                        <hr>
                    </div>
                    <span class="btn btn-primary btn-block" data-ng-click="addObject()">Create Object</span>
                    <br>
                </form>
            </div>
            <div class="objectsList" data-ng-init="indexToShow = -1">
                <a href="#" class="list-group-item" data-ng-repeat="object in getCurrentApplication().objects track by $index">
                    <div class="list-group-item">
                        <div>
                            <img class="componentButtonControl" src="http://localhost:5555/img/config-icon.png" data-ng-click="showObjectEditArea($event, object)"/>
                            <span>{{object.name}}</span>
                        </div>
                        <div data-ng-show="indexToShow == object.name">
                            <hr>
                            <form>
                                <label>Name:</label>
                                <input type="text" data-ng-model="getCurrentObject().name" placeholder="Enter Object Name">
                                <hr>
                                <label>Attributes:</label>
                                <hr>
                                <div data-ng-repeat="attribute in getCurrentObject().attributes track by $index">
                                    {{$index + 1}}.
                                    Name:
                                    <input type="text" placeholder="Enter Attribute name" data-ng-model="attribute.name">
                                    Type:
                                    <select data-ng-model="attribute.type" ng-options="i for i in basic_types"></select>
                                    <div class="removeFormFieldsButton" data-ng-click="removeAttribute($index)"></div>
                                    <br>
                                </div>
                                <div class="addFormFieldsButton" data-ng-click="addAttribute()"></div>
                                <hr>
                                Actions:
                                <hr>
                                <div data-ng-repeat="action in getCurrentObject().actions track by $index">
                                    {{$index + 1}}.
                                    Name: <input type="text" data-ng-model="action.name" title="Action Name">
                                    <br>
                                    Attribute:
                                    <select ng-model="action.operand1" ng-options="i.name for i in getCurrentObject().attributes"></select>
                                    <br>
                                    Action:
                                    <select ng-model="action.operator" ng-options="i for i in operators"></select>
                                    <br>
                                    Operand:
                                    <input type="text" ng-model="action.operand2">
                                    <div class="removeFormFieldsButton" data-ng-click="removeAction($index)"></div>
                                    <hr>
                                </div>
                                <div class="addFormFieldsButton" data-ng-click="addAction()"></div>
                                <hr>
                                <button type="button" class="btn btn-danger" data-ng-click="hideObjectEditArea()">Cancel</button>
                                <button type="button" class="btn btn-primary" data-ng-click="editObject(object)">Save</button>
                                <button type="button" class="btn btn-warning" style="margin-left: 30%" data-ng-click="deleteObject(object)">Delete</button>
                            </form>
                        </div>
                    </div>
                </a>
            </div>
        </div>
        <div id="behaviorAddArea" class="centralAreaComponent tab-pane fade">
            <div class="componentMainTitle">
                Behavior
            </div>
            <span class="btn btn-primary btn-block" data-ng-click="addNewBehavior()">new behavior</span>
            <div data-ng-show="showNoBehaviorMembersImage && !getCurrentApplication().behaviors.length"><img class="noMembersImage" src="http://localhost:5555/img/no_behaviors.png"></div>
            <div class="mergeLeft" data-ng-show="areaFlags['behaviorCreateArea']">
                <form>
                    <div class="form-group">
                        <label>Name:</label><br>
                        <input type="text" data-ng-model="getCurrentBehavior().name" placeholder="Enter Behavior Name">
                    </div>
                    <div class="form-group">
                        <label>Action:</label>
                        <br>
                        Object:
                        <select ng-model="getCurrentBehavior().operandObject" ng-options="item as item.name for item in getCurrentApplication().objects"></select>
                        Operator:
                        <select ng-model="getCurrentBehavior().operator" ng-options="i for i in behaviorOperators"></select>
                        Operand:
                        <select ng-model="getCurrentBehavior().operandAttribute.name" ng-options="item as item.name for item in getCurrentBehavior().operandObject.attributes.concat(getCurrentBehavior().operandObject.actions)"></select>
                    </div>
                    <hr>
                    <div class="form-group">
                        <label>Conditions:</label>
                        <br>
                        <div data-ng-repeat="condition in getCurrentBehavior().conditions track by $index">
                            <form class="editArea">
                                {{$index + 1}}.
                                Attribute:
                                <select ng-model="condition.attribute" ng-options="item as item.name for item in getCurrentBehavior().operandObject.attributes.concat(getCurrentBehavior().operandObject.actions)"></select>
                                Logic Operation:
                                <select ng-model="condition.logicOperation" ng-options="i for i in logicOperations"></select>
                                Value:
                                <input type="text" ng-model="condition.value">
                            </form>
                            <div class="removeFormFieldsButton" data-ng-click="removeCondition($index)"></div>
                        </div>
                        <div class="addFormFieldsButton" data-ng-click="addCondition()"></div>
                    </div>
                    <hr>
                    <span class="btn btn-primary btn-block" data-ng-click="addBehavior()">Create Behavior</span>
                </form>
            </div>
            <div class="objectsList" data-ng-init="indexToShow = -1">
                <a href="#" class="list-group-item" data-ng-repeat="behavior in getCurrentApplication().behaviors track by $index">
                    <div class="list-group-item">
                        <div>
                            <img class="componentButtonControl" src="http://localhost:5555/img/config-icon.png" data-ng-click="showBehaviorEditArea($event, behavior)"/>
                            <span>{{behavior.name}}</span>
                        </div>
                        <div data-ng-show="indexToShow == behavior.name">
                            <hr>
                            <form>
                                <label>Name:</label>
                                <input type="text" data-ng-model="getCurrentBehavior().name" placeholder="Enter Behavior Name">
                                <hr>
                                <label>Action:</label>
                                <br>
                                <div>
                                    Object:
                                    <select ng-model="getCurrentBehavior().operandObject" ng-options="item as item.name for item in getCurrentApplication().objects"></select>
                                    Operator:
                                    <select ng-model="getCurrentBehavior().operator" ng-options="i for i in behaviorOperators"></select>
                                    Operand:
                                    <select ng-model="getCurrentBehavior().operandAttribute.name" ng-options="item as item.name for item in getCurrentBehavior().operandObject.attributes.concat(getCurrentBehavior().operandObject.actions)"></select>
                                </div>
                                <hr>
                                <label>Conditions:</label>
                                <div data-ng-repeat="condition in getCurrentBehavior().conditions track by $index">
                                    <form class="editArea">
                                        {{$index + 1}}.
                                        Attribute:
                                        <select ng-model="condition.attribute" ng-options="item as item.name for item in getCurrentBehavior().operandObject.attributes.concat(getCurrentBehavior().operandObject.actions)"></select>
                                        Logic Operation:
                                        <select ng-model="condition.logicOperation" ng-options="i for i in logicOperations"></select>
                                        Value:
                                        <input type="text" ng-model="condition.value">
                                    </form>
                                    <div class="removeFormFieldsButton" data-ng-click="removeCondition($index)"></div>
                                </div>
                                <div class="addFormFieldsButton" data-ng-click="addCondition()"></div>
                                <hr>
                                <button type="button" class="btn btn-danger" data-ng-click="hideBehaviorEditArea()">Cancel</button>
                                <button type="button" class="btn btn-primary" data-ng-click="editBehavior(behavior)">Save</button>
                                <button type="button" class="btn btn-warning" style="margin-left: 30%" data-ng-click="deleteBehavior(behavior)">Delete</button>
                            </form>
                        </div>
                    </div>
                </a>
            </div>
        </div>
        <div id="releaseArea" class="centralAreaComponent tab-pane fade">
            <!--data-ng-show="areaFlags['releaseArea']">-->
            <div class="componentMainTitle">
                Release
            </div>
            <hr>
            <div class="btn btn-warning" data-ng-click="releaseBuildApplication(currentApplication)">
                <b>Build {{currentApplication.name}}</b>
            </div>
            <div id="appQRImage" data-ng-show="getApplicationBuilt()"></div>
        </div>
    </div>

    <div class="workAreaComponent sideArea" data-ng-show="areaFlags['sideArea']">
        <div class="centralAreaComponent designArea" data-ng-init="refreshIframe()" data-ng-show="areaFlags['designArea']">
            <div class="componentMainTitle">
                Preview
            </div>
            <div id="emulatedCode" class="designAreaEmulator">
                <nav class="navbar navbar-inverse designAreaTopMenu" >
                    <div class="container-fluid ">
                        <div class="navbar-header">
                            <a class="navbar-brand" href="#" data-ng-click="designDisplayBehaviorPage()">{{getCurrentApplication().name}}</a>
                        </div>
                        <ul class="nav navbar-nav navbar-right" >
                            <li data-ng-repeat="object in getCurrentApplication().objects track by $index" ><a href="#" data-ng-click="designDisplayObjectPage(object)">{{object.name}}</a></li>
                        </ul>
                    </div>
                </nav>
                <div class="designAreaPage" data-ng-show="getShowEmulatorMainPage()">
                    <button class="btn btn-primary btn-block" ng-repeat="behavior in getCurrentApplication().behaviors track by $index" data-ng-click="performBehaviorAction(behavior)">{{behavior.name}}</button><br>
                </div>
                <div class="designAreaPage" data-ng-show="!getShowEmulatorMainPage()" data-ng-init="attribute_values=[]">
                    <form class="form-horizontal" role="form" data-ng-repeat="attr in getCurrentInstance().attributes track by $index">
                        <input type="text" class="form-control" placeholder="{{attr.name}}" data-ng-model="attribute_values[$index]">
                    </form>
                    <button class="btn btn-primary btn-block" data-ng-click="addInstance()">Add</button><hr>
                    <input type="text" class="form-control" placeholder="Index to Remove" data-ng-model="idx">
                    <button class="btn btn-primary btn-block" data-ng-click="removeInstance(idx)">Remove</button>
                    <hr>
                    <table class="table" style="width: 100%">
                        <tr>
                            <th style="width: 10%">Idx</th>
                            <th data-ng-repeat="attr in getCurrentInstance().attributes track by $index">
                                {{attr.name}}
                            </th>
                        </tr>
                        <tr data-ng-repeat="instance in instances[getCurrentInstance().name] track by $index">
                            <td>{{$index}}</td>
                            <td data-ng-repeat="val in instance track by $index">
                                {{val}}
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="navbar navbar-inverse designAreaOutput">
                    <label class="designAreaOutputLabel">OUTPUT > <br>{{getOutput()}}</label>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="panel panel-success container-fluid debug" data-ng-show="DEBUG">
    <label data-ng-model="message">DEBUG:  {{message}}</label>
</div>

</body>
</html>