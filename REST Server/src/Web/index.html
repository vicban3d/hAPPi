<html>
<head>
    <title>hAPPi - Human - Application Interpreter</title>
    <script type="text/javascript" src="http://localhost:5555/lib/angular.min.js"></script>
    <script type="text/javascript" src="http://localhost:5555/lib/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="http://localhost:5555/js/strings.js"></script>
    <script type="text/javascript" src="http://localhost:5555/js/util.js"></script>
    <script type="text/javascript" src="http://localhost:5555/js/index.js"></script>
    <script type="text/javascript" src="http://localhost:5555/js/angular_index.js"></script>
    <script type="text/javascript" src="http://localhost:5555/js/drag-n-drop.js"></script>
    <link rel="stylesheet" type="text/css" href="http://localhost:5555/css/index.css">
</head>
<body data-ng-app="main" data-ng-controller="ctrl_main">
<div class="title" data-ng-show="areaFlags['titleArea']">
    hAPPi UI Prototype
</div>
<div class="message" data-ng-show="areaFlags['messageArea']">
    <label>{{message}}</label>
</div>
<div class="workArea">
    <div class="workAreaComponent menuArea" data-ng-show="areaFlags['menuArea']">
        <div data-ng-show="areaFlags['menuButtonsArea']" ng-repeat="button in menuButtons">
            <div class="menuButton" data-ng-click="button.function()">
                {{button.label}}
            </div>
        </div>
    </div>
    <div class="workAreaComponent centralArea" data-ng-show="areaFlags['centralArea']">
        <div class="centralAreaComponent" data-ng-show="areaFlags['applicationListArea']">
            <div class="componentMainTitle">
                Applications
            </div>
            <span data-ng-repeat="application in applications track by $index">
                <span class="componentButton" data-ng-click="getApplication(application)">
                    <div class="textInButton">{{application.name}}</div>
                    <span class='componentButtonControl componentButtonControlDelete' data-ng-click="deleteApplication(application)"></span>
                    <span class="componentButtonControl componentButtonControlEdit" data-ng-click="editApplicationDetails(application)"></span>
                </span>
            </span>
            <span class="componentButton componentButtonAdd" data-ng-click="addNewApplication()">

            </span>
        </div>
        <div class="centralAreaComponent" data-ng-show="areaFlags['objectsAddArea']">
            <div class="componentMainTitle">
                Objects
            </div>
            <span data-ng-repeat="object in objects track by $index">
                <span class="componentButton" data-ng-mouseover="showObjectDetails(object)">
                    <div class="textInButton">{{object.name}}</div>
                    <span class='componentButtonControl componentButtonControlDelete' data-ng-click="deleteObject(object)"></span>
                   <span class='componentButtonControl componentButtonControlEdit' data-ng-click="editObjectDetails(object)"></span>
                </span>
            </span>
            <span class="componentButton componentButtonAdd" data-ng-click="addNewObject()">
            </span>
        </div>
        <div class="centralAreaComponent" ng-show="areaFlags['behaviorAddArea']">
            <div class="componentMainTitle">
                Behavior
            </div>
            <span ng-repeat="behavior in behaviors track by $index">
                <span class="componentButton" data-ng-mouseover="showBehaviorDetails(behavior)">
                    <div class="textInButton">{{behavior.name}}</div>
                    <span class='componentButtonControl componentButtonControlDelete' data-ng-click="deleteBehavior(behavior)"></span>
                    <span class='componentButtonControl componentButtonControlEdit' data-ng-click="editBehaviorDetails(behavior)"></span>
                </span>
            </span>
            <span class="componentButton componentButtonAdd" data-ng-click="addNewBehavior()">
            </span>
        </div>
        <div class="centralAreaComponent designArea"  ng-show="areaFlags['designArea']" data-ng-init="refreshIframe()" ondragover="allowDrop(event)">
            <div class="componentMainTitle">
                Design
            </div>
            <img class="designAreaEmulator designAreaPhoneBG" src="http://localhost:5555/img/phone.png">
            <!--<div class="designAreaToolbar" ondragover="allowDrop(event)">-->
            <!--<img class="designAreaToolbarButton" src="http://localhost:5555/img/trash.png" ondrop="dropDelete(event)" ondragover="allowDrop(event)">-->
            <!--<img class="designAreaToolbarButton" src="http://localhost:5555/img/grid.png">-->
            <!--</div>-->
            <div class="designAreaEmulator designAreaGrid">
                <div class="designAreaTabs">
                    <button class="designAreaTab" ng-repeat="object in objects track by $index" data-ng-click="designDisplayObjectPage(object)">{{object.name}}</button>
                    <br><button class="designAreaTab" data-ng-click="designDisplayBehaviorPage()">F></button>
                </div>

                <div class="designAreaButtons" data-ng-show="showBehaviors">
                    <button class="draggableButton" ng-repeat="behavior in behaviors track by $index" data-ng-click="performBehaviorAction(behavior)">{{behavior.name}}</button><br>
                </div>
                <div class="designAreaButtons" data-ng-show="showInstance" data-ng-init="vals=[]">
                    {{currentInstance.name}}<hr>
                    <div data-ng-repeat="attr in currentInstance.attributes track by $index">
                        {{index}} {{attr.name}} : <input type="text" data-ng-model="vals[$index]"><br>
                    </div>
                    <button class="draggableButton" data-ng-click="addInstance()">Add</button><hr>
                    Index:<input type="text" data-ng-model="idToRemove"><br>
                    <button class="draggableButton" data-ng-click="removeInstance(idToRemove)">Remove</button>
                    <hr>
                    <table style="width: 100%" border="1px">
                        <tr>
                            <th style="width: 10%">Idx</th>
                            <th data-ng-repeat="attr in currentInstance.attributes track by $index">
                                {{attr.name}}
                            </th>
                        </tr>
                        <tr data-ng-repeat="instance in instances[currentInstance.name] track by $index">
                            <td>{{$index}}</td>
                            <td data-ng-repeat="val in instance">
                                {{val}}
                            </td>
                        </tr>

                    </table>
                </div>
                <div class="designAreaOutput">
                    <label class="designAreaOutputLabel"><b>OUTPUT</b>:{{emulatorOutput}}</label>
                </div>
            </div>
        </div>
    </div>
    <div class="workAreaComponent sideArea" data-ng-show="areaFlags['sideArea']">
        <div class="sideAreaComponent" data-ng-show="areaFlags['objectDetailsArea']">
            <div class="componentMainTitle">{{currentObject.name}}</div>
            <div class="componentListTitle">Attributes:</div>
            <div ng-repeat="attr in currentObject.attributes track by $index">
                <div class="componentListEntry">{{attr.name + " - " + attr.type}}</div>
            </div>
            <div class="componentListTitle">Actions:</div>
            <div ng-repeat="act in currentObject.actions track by $index">
                <div class="componentListEntry">{{act.name + ": " + act.operand1.name + " " + act.operator + " " + act.operand2}}</div>
            </div>
            <hr>
        </div>
        <div class="sideAreaComponent" data-ng-show="areaFlags['objectEditArea']">
            <form class="editArea" data-ng-submit="addObject()" data-ng-init="name=''">
                Name: <input type="text" data-ng-model="name" title="Object Name">
                <hr>
                Attributes:<br>
                <div data-ng-repeat="n in [].constructor(numOfAttributes) track by $index" data-ng-init="all_attrs[$index]={name:'', type:''}">
                    {{$index + 1}}.
                    Name: <input type="text" data-ng-model="all_attrs[$index].name" title="Attribute" data-ng-init="all_attrs[$index].type=basic_types[0]">
                    Type: <select ng-model="all_attrs[$index].type" ng-options="i for i in basic_types" title="Type">
                </select>
                </div>
                <div class="addFormFieldsButton" data-ng-click="addAttribute()"></div>
                <hr>
                Actions:<br>
                <span ng-repeat="n in [].constructor(numOfActions) track by $index">
                        {{all_acts_Object[$index].name + ": " + all_acts_Object[$index].operand1.name + " " + all_acts_Object[$index].operator + " " + all_acts_Object[$index].operand2}}
                        <br>
                </span>
                <div class="addFormFieldsButton" data-ng-click="addActionObject()"></div>
                <hr>
                <button type="submit">Create Object</button>
            </form>
        </div>
        <div class="sideAreaComponent" data-ng-show="areaFlags['behaviorDetailsArea']">
            <div class="componentMainTitle">{{currentBehavior.name}}</div>
            <div class="componentListTitle">Actions:</div>
            <div ng-repeat="act in currentBehavior.actions track by $index">
                <div class="componentListEntry">{{act.operandObject.name + " : " + act.operandAttribute.name + " " + act.operator}}</div>
            </div>
            <hr>
        </div>
        <div class="sideAreaComponent" data-ng-show="areaFlags['behaviorEditArea']">
            <form class="editArea" data-ng-submit="addBehavior()" data-ng-init="name=''">
                Name: <input type="text" data-ng-model="name" title="Behavior Name">
                <hr>
                Actions:<br>
                <span ng-repeat="n in [].constructor(numOfActions) track by $index">
                        {{all_acts_Behavior[$index].operandObject.name + ": " + all_acts_Behavior[$index].operandAttribute.name + " " + all_acts_Behavior[$index].operator}}
                        <br>
                </span>
                <div class="addFormFieldsButton" data-ng-click="addActionBehavior()"></div>
                <hr>
                <button type="submit">Create Behavior</button>
            </form>
        </div>

        <div class="sideAreaComponent" data-ng-show="areaFlags['applicationDetailsArea']">
            <div class="componentMainTitle">{{currentApplication.name}}</div>
            <div class="componentListTitle">Platforms:</div>
            <div class="componentListEntry" ng-repeat="platform in currentApplication.platforms track by $index">
                {{platform}}
            </div>
        </div>
        <div class="sideAreaComponent" data-ng-show="areaFlags['applicationCreateArea']"><!--data-ng-init="name=''; platforms=[]"-->
            <form class="editArea" data-ng-submit="addApplication()">
                Name: <input type="text" data-ng-model="name" title="Application Name">
                <hr>
                <input type="checkbox" name="platform" value="android" data-ng-model="android" title="android"> Android<br>
                <input type="checkbox" name="platform" value="ios" data-ng-model="ios" title="ios"> iOS<br>
                <input type="checkbox" name="platform" value="windowsPhone" data-ng-model="windowsPhone" title="wp"> Windows Phone<br>
                <button type="submit">Create Application</button>
            </form>
        </div>

        <div class="sideAreaComponent" data-ng-show="areaFlags['applicationEditArea']"> <!--data-ng-init="name=''; platforms=[]"-->
            <form class="editArea" data-ng-submit="editApplication()">
                Name: <input type="text" data-ng-model="name" title="Application Name">
                <hr>
                <input type="checkbox" name="platform" value="android" data-ng-model="android" title="android"> Android<br>
                <input type="checkbox" name="platform" value="ios" data-ng-model="ios" title="ios"> iOS<br>
                <input type="checkbox" name="platform" value="windowsPhone" data-ng-model="windowsPhone" title="wp"> Windows Phone<br>
                <button type="submit">Edit Application</button>
            </form>
        </div>
        <div class="addActionArea" data-ng-show="areaFlags['actionsEditAreaObject']">
            <form class="editArea" data-ng-submit="addNewAction()"
                  ng-init="all_acts_Object[numOfActions] = {name:'',operand1:'',operator:'',operand2:''}">
                Name: <input type="text" data-ng-model="all_acts_Object[numOfActions].name" title="Action Name"
                             data-ng-init="all_acts_Object[numOfActions].operator=operators[0]">
                <hr>
                <select ng-model="all_acts_Object[numOfActions].operand1" ng-options="i.name for i in all_attrs"
                        title="Operand1"></select>
                <select ng-model="all_acts_Object[numOfActions].operator" ng-options="i for i in operators"
                        title="Operator"></select>
                <input type="text" ng-model="all_acts_Object[numOfActions].operand2" title="Operand2">
                <button type="submit">Add Action</button>
            </form>
        </div>
        <div class="addActionArea" data-ng-show="areaFlags['actionsEditAreaBehavior']">
            <form class="editArea" data-ng-submit="addNewAction()"
                  ng-init="all_acts_Behavior[numOfActions] = {name:'',operandObject:'',operandAttribute:'',operator:''}"
                  ng-init="all_conditions[numOfConditions] = {conditionAttributes'',logic:'',value:''}">
                Action:
                <br><br>
                <select ng-model="all_acts_Behavior[numOfActions].operandObject"
                        ng-options="item as item.name for item in objects" title="operandObject"></select>
                <select ng-model="all_acts_Behavior[numOfActions].operandAttribute"
                        ng-options="item as item.name for item in all_acts_Behavior[numOfActions].operandObject.attributes"
                        title="operandAttribute" ></select>
                <select ng-model="all_acts_Behavior[numOfActions].operator" ng-options="i for i in behaviorOperators"
                        title="Operator"></select>
                <hr>
                <!--Condition:
                <br>
                <div data-ng-repeat="n in [].constructor(numOfConditions) track by $index">
                    {{$index + 1}}.
                    <select ng-model="all_conditions[$index].conditionAttributes"
                            ng-options="item as item.name for item in all_acts_Behavior[numOfActions].operandObject.attributes"
                            title="conditionAttribute" ></select>
                    <select ng-model="all_conditions[$index].logic" ng-options="item for item in logic_types"
                            title="Logic"></select>
                    <input type="text" data-ng-model="all_conditions[$index].value" title="Condition Value">
                    <br>
                    &lt;!&ndash;<select type="text" ng-model="all_conditions[$index].condition" ng-options="item for item in conditions"
                            title="Condition"></select>&ndash;&gt;
                </div>
                <div class="addFormFieldsButton" data-ng-click="addCondition()"></div>
                <hr>-->
                <button type="submit">Add Action</button>
            </form>
        </div>
        <div class="sideAreaComponent" ng-show="areaFlags['designArea']">
            <!--<div class="designWidgetsToolbar"  ondrop="dropDelete(event)" ondragover="allowDrop(event)">-->
            <!--<div class="componentMainTitle">-->
            <!--Widgets-->
            <!--</div>-->
            <!--<button class="draggableComponent draggableButton" id="drag1" draggable="true" ondragstart="drag(event)">BUTTON</button>-->
            <!--<input type="text" class="draggableComponent draggableTextInput" id="drag2" placeholder="INPUT" draggable="true" ondragstart="drag(event)">-->
            <!--<label class="draggableComponent draggableLabel" id="drag3" draggable="true" ondragstart="drag(event)">LABEL</label>-->
            <!--<div class="draggableComponent draggableListView" id="drag4" draggable="true" ondragstart="drag(event)">-->
            <!--List:-->
            <!--<hr>-->
            <!--<label>Item_1</label><hr>-->
            <!--<label>Item_2</label><hr>-->
            <!--<label>:</label><hr>-->
            <!--<label>Item_n</label><hr>-->
            <!--</div>-->
            <!--</div>-->
        </div>
    </div>
</div>
</body>
</html>